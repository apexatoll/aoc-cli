# AoC-cli

![](https://github.com/apexatoll/aoc-files/blob/master/demo.gif)

AoC-cli is a command-line application to interact with the Advent of Code puzzles built entirely in Ruby.

I am in no way affiliated with AoC, but I would like to take this opportunity to thank the creator Eric Wastl for the taking the time and great effort to produce these fantastic puzzles!

AoC-cli has several features and allows for complete control within the terminal.

Please note that requests are hard-coded to be throttled to a maximum of 1 HTTP request per 5 seconds. This is to ensure that the AoC server is not overloaded with requests. Please do not try and change this - it is to protect the server!

### Features
- Download raw input files and puzzle instructions as markdown files with one single command
- Download calendar files as markdown to show progress within the year
- Send solve attempts to the AoC server and return the response. Calendar files and puzzle files are then refreshed automatically
- Information about days and years is stored in automatically generated metafiles. This means that attempting a puzzle is as simple as running `aoc -s $attempt` from the puzzle directory
- Account information is obtained by using session cookies. AoC-cli allows for multiple keys to be stored to represent multiple accounts


## Installation

Add this line to your application's Gemfile:

```ruby
gem 'aoc_cli'
```

And then execute:

    $ bundle install

Or install it yourself as:

    $ gem install aoc_cli

## Setup

AoC-cli is designed to be run using metafiles generated by the program. These files store information about the user, year, day, part, number of stars and total stars so that commands can be simplified. AoC-cli can be run manually by passing each argument with the corresponding flag, but this has not been as rigourously tested and is not recommended.

First you must store your unique session cookie before you can use the interface. To do this, log into the Advent of Code website as usual and load any page. Open developer tools and open the network tab. There should be a file in there that contains the cookie. It should look something like:

`session=<ALPHANUMERIC STRING>`

This should be copied in full and stored by passing the command
`aoc -k <your key (including session=)>`

AoC-cli stores this key under the username 'main' by default. To store the key with a different username use the `-u` or `--user` flags.

Session keys are stored in aoc-cli's config file, located at ~/.config/aoc-cli/aoc.rc. This file is created when you first store a key

Please note that this key is unique to your account - do not share this!

You are now ready to use the cli.

## Usage

### Initialising the Year

First you need to intialise your year directory. AoC-cli defaults to a main directory containing each day's puzzle in a separate subdirectory.

Initialise the year directory using the command 

```bash
aoc -y <year> [-u <user>]
```

The user flag is not needed if you wish to use the default 'main' session cookie.

This command will create necessary metafiles, download the year calendar and fill it with your progress. This is stored in a markdown file in the year directory.

By default, your stats in the leaderboard are also added to this file. To turn this off add the line `include_leaderboard=>false` to your config file.

### Fetching Puzzles

You can now get day data! To fetch puzzle instructions and inputs you can run the command `aoc -d <day>` from the year directory. This will create a subdirectory, create metadata and download the instructions as markdown, and the input as raw text. (Note as mentioned requests are throttled - do not try to bulk download puzzle data)

### Solving Puzzles

From the day directory you can attempt puzzles by running the command 

```bash
aoc -s [--solve] <answer>
```

The additional puzzle information is fetched from the metafile. You will then receive feedback on whether your attempt was succesful. If your answer is correct, aoc-cli will automatically update the puzzle instructions and your calendar file.

Incorrect attempts will be logged in an attempts file. You can see your previous attemtpts by running the command `aoc -a [--attempts]` from the day directory. You may receive a message telling you whether your attempt was too high or too low.

If you have sent multiple incorrect attempts AoC will ask you to wait before trying again - be patient!

Attempts can also be piped to aoc. For example if you are solving the puzzle in ruby you could use the command

```bash
ruby day.rb | aoc
```


### Vim Integration

For vim users, I have a keymap setup to run this automatically. In your vimrc file you could add 

```vim
autocmd filetype ruby nmap <silent><leader>ac :! ruby % \| aoc<CR>
```

Running leader + ac would then run your program and send the answer to the server for verification (as long as your program only outputs an answer and no other text). Do not send endless attempts - only send when you are comfortable with your answer!
 

## Further features



## Contributing

Bug reports and pull requests are welcome on GitHub at https://github.com/[USERNAME]/aoc_cli.

## License

The gem is available as open source under the terms of the [MIT License](https://opensource.org/licenses/MIT).
