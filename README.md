# `Advent of Code - cli`

![](https://github.com/apexatoll/aoc-files/blob/master/demo.gif)

aoc-cli is a command-line interface built in Ruby for Advent of Code puzzles.

aoc-cli has many features and allows for complete interaction with AoC from within the terminal.

### Main Features
- Download calendar files as markdown to show progress within the year
- Download raw input files and puzzle instructions as markdown files with one single command
- Send solve attempts to the AoC server and return the response. Calendar files and puzzle files are refreshed automatically
- Print ascii tables of previous attempts for a puzzle
- Information about days and years is stored automatically generated metafiles. This means that answering a puzzle is as simple as running `aoc -s $attempt` from the puzzle directory
- Inteis obtained by using session cookies. AoC-cli allows for multiple keys to be stored to represent multiple accounts
- Quickly open Reddit solution megathreads from the day subdirectory


## Installation

Install as a gem

```bash
$ gem install aoc_cli`
```

Alternatively to install manually

```bash
$ git clone ""
$ cd aoc-cli
$ rake build install
```

## Setup

### Finding your Session Key

- To use aoc-cli you must first store your unique session cookie. To do this, log into the Advent of Code website as usual and load any page. 
- Open developer tools and open the network tab. Refresh the page and you should see a file that contains your session cookie.
- It will look something like:

```
session=<ALPHANUMERIC STRING>
```

- This is unique to your account, and allows aoc-cli to interact with the AoC server do not share this!


### Storing your Session Key

- Copy the session key (including "session=") to the clipboard and open your terminal
- Run the following command

```bash
aoc -k "your key" 

```

- AoC-cli stores this key under the alias 'main' by default. 
- To store the key under a different alias use the `-u` or `--user` flags followed by the desired alias.
- Session keys are stored in the aoc config file located at `~/.config/aoc-cli/aoc.rc`.

- Keys can be stored manually in this file by formatting as so:

```bash
cookie=><alias>=><key>
```

### Default Alias

- aoc-cli allows for multiple keys to be stored within the config file. 
- By default, the key under the "main" alias is used as default when initialising year directories
- To see which alias is currently deafult run `aoc -U` or `aoc --default`
- You can update the default alias by running 

```bash
aoc -U <new_default_alias>
```

- Alternatively you can add the following line to your config file

```bash
default=><new_default_alias>
```

## Usage

- aoc-cli is designed to run in a file-tree generated by the interface. There are two types of directories
	1. Year directories
		- These contain your calendar and all day subdirectories
	2. Day subdirectories
		- These contain the puzzles, your input and your code


## Initialising the Year

- aoc-cli will intialise within your current working directory.
- First create a directory for the year and cd into it
- eg

```bash
mkdir 2020
cd 2020
```
- Initialise the year directory using the command 

```bash
aoc -y 2020
```

- This will set the session key to the default alias
- To use a different AoC account run

```bash
aoc -y 2020 -u <alias>
```

This command will create necessary metafiles, download the year calendar and fill it with your progress. This is stored in a markdown file in the year directory.

By default, your stats in the leaderboard are also added to this file. To turn this off add the line `include_leaderboard=>false` to your config file.



## Initialising a Day

- You can now get day data! To fetch puzzle instructions and inputs you can run the following command from within the year directory
```bash
aoc -d <day>
```

This command performs the following actions

- Creates a day subdirectory
- Fetches the puzzle as markdown
- Fetches raw puzzle input

All puzzles and inputs are cached in aoc-cli on a per-user basis. 
This means that if you have previously initialised this day under this alias before, your puzzle and input will be transferred from the cache rather than downloading from the aoc server.


## Solving Puzzles

From the day subdirectory you can attempt to solve puzzles by running the command 

```bash
aoc -s <answer>
```




The additional puzzle information is fetched from the metafile. You will then receive feedback on whether your attempt was succesful. 

If your answer is correct, aoc-cli will automatically update the puzzle instructions and your calendar file.

Incorrect attempts will be logged in an attempts file. You can see your previous attemtpts by running the command `aoc -a [--attempts]` from the day directory. You may receive a message telling you whether your attempt was too high or too low.

If you have sent multiple incorrect attempts AoC will ask you to wait before trying again - be patient!

Attempts can also be piped to aoc. For example if you are solving the puzzle in ruby you could use the command

```bash
ruby day.rb | aoc
```


### Vim Integration

For vim users, I have a keymap setup to run this automatically. In your vimrc file you could add 

```vim
autocmd filetype ruby nmap <silent><leader>ac :! ruby % \| aoc<CR>
```

Running leader + ac would then run your program and send the answer to the server for verification (as long as your program only outputs an answer and no other text). Do not send endless attempts - only send when you are comfortable with your answer!
 

## Further features


I am in no way affiliated with AoC, but I would like to take this opportunity to thank the creator Eric Wastl for the taking the time and great effort to produce these fantastic puzzles!


Please note that requests are hard-coded to be throttled to a maximum of 1 HTTP request per 5 seconds. This is to ensure that the AoC server is not overloaded with requests. Please do not try and change this - it is to protect the server!

## Contributing

Bug reports and pull requests are welcome on GitHub at https://github.com/[USERNAME]/aoc_cli.

## License

The gem is available as open source under the terms of the [MIT License](https://opensource.org/licenses/MIT).
